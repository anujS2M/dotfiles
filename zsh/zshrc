# To use this zshrc as your default zshrc file, create a symlink of this file
# in your home folder. Just create  a symlink of the zshrc file and it will
# source the other files on it's own. The command usually looks like
# ln -s ~/Personal/dotfiles/zsh/zshrc ~/.zshrc

export TERM="xterm-256color"

ZSH_THEME="powerlevel9k/powerlevel9k"

case `uname` in
  Darwin)
    export isMacOS=true
  ;;
  Linux)
    export isMacOS=false
  ;;
esac

if type brew &>/dev/null; then
  FPATH=$(brew --prefix)/share/zsh/site-functions:$FPATH
fi

# Check if the OS is MAC or Linux
if [ "$isMacOS" = true ]; then
  # Get the absolute path of the symlinked zshrc to read the other rc files
  ABSOLUTE_FILE_PATH="$(readlink /Users/$(whoami)/.zshrc)"
  FILE_DIR=${ABSOLUTE_FILE_PATH%??????}
  export ZSH="/Users/$(whoami)/.oh-my-zsh" # Path to your oh-my-zsh installation.
  source $(echo $FILE_DIR)/macosrc
else
  # Get the absolute path of the symlinked zshrc to read the other rc files
  ABSOLUTE_FILE_PATH="$(readlink -f /home/$(whoami)/.zshrc)"
  FILE_DIR=${ABSOLUTE_FILE_PATH%??????}
  export ZSH="/home/$(whoami)/.oh-my-zsh" # Path to your oh-my-zsh installation.
  source $(echo $FILE_DIR)/linuxrc
fi

export DOT_SOURCE=${FILE_DIR%????} # Export the directory where the dotfiles are stored

source $(echo $FILE_DIR)/pathrc
source $(echo $FILE_DIR)/powerlevel9krc


ENABLE_CORRECTION="true"

plugins=(git zsh-autosuggestions z zsh-syntax-highlighting zsh-completions)
autoload -U compinit && compinit

source $ZSH/oh-my-zsh.sh

export LANG=en_US.UTF-8

BASE16_SHELL="$HOME/.config/base16-shell/"
[ -n "$PS1" ] && \
    [ -s "$BASE16_SHELL/profile_helper.sh" ] && \
        eval "$("$BASE16_SHELL/profile_helper.sh")"

# For a full list of active aliases, run `alias`.

[ -f ~/.fzf.zsh ] && source ~/.fzf.zsh

# Prevent zsh from showing the system name before each command
prompt_context () { }

# ZSH completions for Alacritty
fpath+=${ZDOTDIR:-~}/.zsh_functions

source ${ZSH_CUSTOM:-~/.oh-my-zsh/custom}/zsh-interactive-cd/zsh-interactive-cd.plugin.zsh

# Disable that pesky auto correct
unsetopt correct_all

source $(echo $FILE_DIR)/common_aliasrc
source $(echo $FILE_DIR)/secretsrc

export NVM_DIR="$HOME/.nvm"
[ -s "$NVM_DIR/nvm.sh" ] && \. "$NVM_DIR/nvm.sh"  # This loads nvm
[ -s "$NVM_DIR/bash_completion" ] && \. "$NVM_DIR/bash_completion"  # This loads nvm bash_completion
