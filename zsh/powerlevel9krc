POWERLEVEL9K_MODE="nerdfont-complete"
POWERLEVEL9K_PROMPT_ON_NEWLINE=true
POWERLEVEL9K_PROMPT_ADD_NEWLINE=true
POWERLEVEL9K_MULTILINE_LAST_PROMPT_PREFIX="â†³ "
# POWERLEVEL9K_BATTERY_LEVEL_BACKGROUND=(red1 orangered1 darkorange orange1 gold1 yellow1 yellow2 greenyellow chartreuse1 chartreuse2 green1)
POWERLEVEL9K_CUSTOM_WIFI_SIGNAL="zsh_wifi_signal"

POWERLEVEL9K_CUSTOM_WIFI_SIGNAL_BACKGROUND="black"
POWERLEVEL9K_CUSTOM_WIFI_SIGNAL_FOREGROUND="yellow"
POWERLEVEL9K_LEFT_PROMPT_ELEMENTS=(os_icon dir context newline vcs)
POWERLEVEL9K_RIGHT_PROMPT_ELEMENTS=()
# POWERLEVEL9K_RIGHT_PROMPT_ELEMENTS=(status nvm rvm os_icon)

# Removed and moved to tmux status custom_wifi_signal
zsh_wifi_signal() {
  if [ "$isMacOS" = true ]; then
    zsh_wifi_signal_mac
  else
    zsh_wifi_signal_linux
  fi
}

zsh_wifi_signal_mac() {
  local output=$(/System/Library/PrivateFrameworks/Apple80211.framework/Versions/A/Resources/airport -I)
  local airport=$(echo $output | grep 'AirPort' | awk -F': ' '{print $2}')

  if [ "$airport" = "Off" ]; then
    local color='%F{yellow}'
    echo -n "%{$color%}Wifi Off"
  else
    local ssid=$(echo $output | grep ' SSID' | awk -F': ' '{print $2}')
    local speed=$(echo $output | grep 'lastTxRate' | awk -F': ' '{print $2}')
    local color='%F{yellow}'

    [[ $speed -gt 100 ]] && color='%F{green}'
    [[ $speed -lt 50 ]] && color='%F{red}'

    echo -n "%{$color%}$ssid $speed Mb/s%{%f%}" # removed char not in my PowerLine font
  fi
}

zsh_wifi_signal_linux() {
  local signal=$(nmcli device wifi | grep '*' | awk '{print $7}')
  local color='%F{yellow}'
  [[ $signal -gt 75 ]] && color='%F{green}'
  [[ $signal -lt 50 ]] && color='%F{red}'
  echo -n "$signal %{$color%}MBit/s"
}
